{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/empzxb/Documents/webApp/app/react-client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/Users/empzxb/Documents/webApp/app/react-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/empzxb/Documents/webApp/app/react-client/src/pages/profile.js\";\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n  query($postId: ID!) {\\n    getPost(postId: $postId) {\\n      id\\n      body\\n      createdAt\\n      username\\n      likeCount\\n      likes {\\n        username\\n      }\\n      commentCount\\n      comments {\\n        id\\n        username\\n        createdAt\\n        body\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  mutation($postId: String!, $body: String!) {\\n    createComment(postId: $postId, body: $body) {\\n      id\\n      comments {\\n        id\\n        body\\n        createdAt\\n        username\\n      }\\n      commentCount\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  mutation login($username: String!, $password: String!) {\\n    login(username: $username, password: $password) {\\n      id\\n      email\\n      username\\n      createdAt\\n      token\\n    }\\n  }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useContext, useState, useRef } from 'react';\nimport gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport moment from 'moment';\nimport { Button, Card, Form, Grid, Image, Icon, Label, Menu, Segment } from 'semantic-ui-react';\nimport { AuthContext } from '../context/auth';\nimport { useForm } from '../util/hooks';\nimport LikeButton from '../components/LikeButton';\nimport DeleteButton from '../components/DeleteButton';\nimport MyPopup from '../util/MyPopup';\n\nfunction Profile(props) {\n  const _useQuery = useQuery(FETCH_POSTS_QUERY),\n        loading = _useQuery.loading,\n        posts = _useQuery.data.getPosts;\n\n  const postId = posts.id;\n\n  const _useContext = useContext(AuthContext),\n        user = _useContext.user;\n\n  const commentInputRef = useRef(null);\n\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        comment = _useState2[0],\n        setComment = _useState2[1];\n\n  const _useQuery2 = useQuery(FETCH_POST_QUERY, {\n    variables: {\n      postId\n    }\n  }),\n        getPost = _useQuery2.data.getPost;\n\n  const _useMutation = useMutation(SUBMIT_COMMENT_MUTATION, {\n    update() {\n      setComment('');\n      commentInputRef.current.blur();\n    },\n\n    variables: {\n      postId,\n      body: comment\n    }\n  }),\n        _useMutation2 = _slicedToArray(_useMutation, 1),\n        submitComment = _useMutation2[0];\n\n  function deletePostCallback() {\n    props.history.push('/');\n  }\n\n  let postMarkup;\n\n  if (!getPost) {\n    postMarkup = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Loading post..\");\n  } else {\n    const id = getPost.id,\n          body = getPost.body,\n          createdAt = getPost.createdAt,\n          username = getPost.username,\n          comments = getPost.comments,\n          likes = getPost.likes,\n          likeCount = getPost.likeCount,\n          commentCount = getPost.commentCount;\n    postMarkup = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      centered: true,\n      columns: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      centered: true,\n      width: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Image, {\n      src: \"https://react.semantic-ui.com/images/avatar/large/daniel.jpg\",\n      wrapped: true,\n      ui: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(Card.Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(Card.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Daniel\"), React.createElement(Card.Meta, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Joined in 2016\"), React.createElement(Card.Description, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Daniel is a comedian living in Nashville.\")), React.createElement(Card.Content, {\n      extra: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), \"10 Friends\"))))));\n  }\n\n  return postMarkup;\n}\n\nconst LOGIN_USER = gql(_templateObject());\nconst SUBMIT_COMMENT_MUTATION = gql(_templateObject2());\nconst FETCH_POST_QUERY = gql(_templateObject3());\nexport default Profile;","map":{"version":3,"sources":["/Users/empzxb/Documents/webApp/app/react-client/src/pages/profile.js"],"names":["React","useContext","useState","useRef","gql","useQuery","useMutation","moment","Button","Card","Form","Grid","Image","Icon","Label","Menu","Segment","AuthContext","useForm","LikeButton","DeleteButton","MyPopup","Profile","props","FETCH_POSTS_QUERY","loading","posts","data","getPosts","postId","id","user","commentInputRef","comment","setComment","FETCH_POST_QUERY","variables","getPost","SUBMIT_COMMENT_MUTATION","update","current","blur","body","submitComment","deletePostCallback","history","push","postMarkup","createdAt","username","comments","likes","likeCount","commentCount","LOGIN_USER"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useRef } from 'react';\nimport gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport moment from 'moment';\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n  Image,\n  Icon,\n  Label,\n  Menu, \n  Segment\n} from 'semantic-ui-react';\n\nimport { AuthContext } from '../context/auth';\nimport { useForm } from '../util/hooks';\nimport LikeButton from '../components/LikeButton';\nimport DeleteButton from '../components/DeleteButton';\nimport MyPopup from '../util/MyPopup';\n\nfunction Profile(props) {\n\n  const {\n    loading,\n    data: { getPosts: posts } \n  } = useQuery(FETCH_POSTS_QUERY);\n\n\n  const postId = posts.id; \n  const { user } = useContext(AuthContext);\n  const commentInputRef = useRef(null);\n\n  const [comment, setComment] = useState('');\n\n  const {\n    data: { getPost }\n  } = useQuery(FETCH_POST_QUERY, {\n    variables: {\n      postId\n    }\n  });\n\n  const [submitComment] = useMutation(SUBMIT_COMMENT_MUTATION, {\n    update() {\n      setComment('');\n      commentInputRef.current.blur();\n    },\n    variables: {\n      postId,\n      body: comment\n    }\n  });\n\n  function deletePostCallback() {\n    props.history.push('/');\n  }\n\n\n\n\n  let postMarkup;\n  if (!getPost)\n  {\n    postMarkup = <p>Loading post..</p>;\n  }\n  else \n  {\n    const {\n      id,\n      body,\n      createdAt,\n      username,\n      comments,\n      likes,\n      likeCount,\n      commentCount\n    } = getPost;\n\n    postMarkup = (\n      <div>\n        <Grid centered columns={2}>\n          <Grid.Column centered width={10}>\n            <Card>\n              <Image src='https://react.semantic-ui.com/images/avatar/large/daniel.jpg' wrapped ui={false} />\n              <Card.Content>\n                <Card.Header>Daniel</Card.Header>\n                <Card.Meta>Joined in 2016</Card.Meta>\n                <Card.Description>\n                  Daniel is a comedian living in Nashville.\n                </Card.Description>\n              </Card.Content>\n              <Card.Content extra>\n                <a>\n                  <Icon name='user' />\n                  10 Friends\n                </a>\n              </Card.Content>\n            </Card>\n          </Grid.Column>\n        </Grid>\n      </div>\n    );\n  }\n  return postMarkup;\n\n}\n\nconst LOGIN_USER = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n`;\n\nconst SUBMIT_COMMENT_MUTATION = gql`\n  mutation($postId: String!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      id\n      comments {\n        id\n        body\n        createdAt\n        username\n      }\n      commentCount\n    }\n  }\n`;\n\nconst FETCH_POST_QUERY = gql`\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n`;\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}