{"ast":null,"code":"import _slicedToArray from \"/Users/empzxb/Documents/webApp/app/react-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/empzxb/Documents/webApp/app/react-client/src/components/MenuBar.js\";\nimport React, { useContext, useState } from 'react';\nimport { Menu } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from '../context/auth';\nimport io from \"socket.io-client\";\nconst ENDPOINT = 'http://192.168.1.101:2001';\nlet socket = io(ENDPOINT);\n\nfunction MenuBar() {\n  const _useContext = useContext(AuthContext),\n        user = _useContext.user,\n        logout = _useContext.logout;\n\n  const pathname = window.location.pathname;\n  const path = pathname === '/' ? 'home' : pathname.substr(1);\n\n  const _useState = useState(path),\n        _useState2 = _slicedToArray(_useState, 2),\n        activeItem = _useState2[0],\n        setActiveItem = _useState2[1];\n\n  const handleItemClick = name => {\n    setActiveItem(name);\n    socket.disconnect();\n  };\n\n  const chat_link = user ? \"/chat?name=\" + user.username + \"&room=room\" : \"/chat?name=default&room=room\";\n  const menuBar = user ? React.createElement(Menu, {\n    pointing: true,\n    size: \"massive\",\n    color: \"teal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    name: user.username,\n    active: activeItem === 'home',\n    onClick: () => handleItemClick(\"home\"),\n    as: Link,\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(Menu.Menu, {\n    position: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    name: \"\\u804A\\u5929\",\n    active: activeItem === 'chat',\n    onClick: () => handleItemClick(\"chat\"),\n    as: Link,\n    to: chat_link,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(Menu.Item, {\n    name: \"\\u4E2A\\u4EBA\",\n    active: activeItem === 'profile',\n    onClick: () => handleItemClick(\"profile\"),\n    as: Link,\n    to: \"/profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(Menu.Item, {\n    name: \"\\u767B\\u51FA\",\n    onClick: logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }))) : React.createElement(Menu, {\n    pointing: true,\n    size: \"massive\",\n    color: \"teal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    name: \"\\u4E3B\\u9875\",\n    active: activeItem === 'home',\n    onClick: () => handleItemClick(\"home\"),\n    as: Link,\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(Menu.Menu, {\n    position: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    name: \"\\u767B\\u5165\",\n    active: activeItem === 'login',\n    onClick: () => handleItemClick(\"login\"),\n    as: Link,\n    to: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(Menu.Item, {\n    name: \"\\u6CE8\\u518C\",\n    active: activeItem === 'register',\n    onClick: () => handleItemClick(\"register\"),\n    as: Link,\n    to: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  })));\n  return menuBar;\n}\n\nexport default MenuBar;","map":{"version":3,"sources":["/Users/empzxb/Documents/webApp/app/react-client/src/components/MenuBar.js"],"names":["React","useContext","useState","Menu","Link","AuthContext","io","ENDPOINT","socket","MenuBar","user","logout","pathname","window","location","path","substr","activeItem","setActiveItem","handleItemClick","name","disconnect","chat_link","username","menuBar"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Menu } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\nimport { AuthContext } from '../context/auth';\nimport io from \"socket.io-client\";\n\nconst ENDPOINT = 'http://192.168.1.101:2001';\n\nlet socket = io(ENDPOINT);\n\nfunction MenuBar() {\n  const { user, logout } = useContext(AuthContext);\n  const pathname = window.location.pathname;\n\n  const path = pathname === '/' ? 'home' : pathname.substr(1);\n  const [activeItem, setActiveItem] = useState(path);\n\n  const handleItemClick = (name) => {\n\n  setActiveItem(name);\n  socket.disconnect()\n  };\n\n  const chat_link = user ? (\"/chat?name=\"+user.username+\"&room=room\"):(\"/chat?name=default&room=room\");\n\n  const menuBar = user ? (\n    <Menu pointing size=\"massive\" color=\"teal\">\n\n        <Menu.Item\n          name={user.username}\n          active={activeItem === 'home'}\n          onClick={() => handleItemClick(\"home\")}\n          as={Link}\n          to=\"/\"\n        />\n\n\n\n      <Menu.Menu position=\"right\">\n        <Menu.Item\n          name=\"聊天\"\n          active={activeItem === 'chat'}\n          onClick={() => handleItemClick(\"chat\")}\n          as={Link}\n          to={chat_link}\n        />\n        <Menu.Item\n          name=\"个人\"\n          active={activeItem === 'profile'}\n          onClick={() => handleItemClick(\"profile\")}\n          as={Link}\n          to=\"/profile\"\n        />\n        <Menu.Item name=\"登出\" onClick={logout} />\n      </Menu.Menu>\n    </Menu>\n  ) : (\n    <Menu pointing size=\"massive\" color=\"teal\">\n      <Menu.Item\n        name=\"主页\"\n        active={activeItem === 'home'}\n        onClick={() => handleItemClick(\"home\")}\n        as={Link}\n        to=\"/\"\n      />\n      <Menu.Menu position=\"right\">\n        <Menu.Item\n          name=\"登入\"\n          active={activeItem === 'login'}\n          onClick={() => handleItemClick(\"login\")}\n          as={Link}\n          to=\"/login\"\n        />\n        <Menu.Item\n          name=\"注册\"\n          active={activeItem === 'register'}\n          onClick={() => handleItemClick(\"register\")}\n          as={Link}\n          to=\"/register\"\n        />\n      </Menu.Menu>\n    </Menu>\n  );\n\n  return menuBar;\n}\n\nexport default MenuBar;\n"]},"metadata":{},"sourceType":"module"}